<html>
<head>
    <title>Blossom game</title>
    <link rel="icon" type="png" href="https://static.vecteezy.com/system/resources/previews/018/872/002/non_2x/cherry-blossom-flower-icon-vector.jpg">
</head>
<body style="text-align:center;background-color:PapayaWhip">
    <h1>Welcome to our blossom game!</h1>
    <p>This is a temporary page while we work on the game.</p>
    <img src="https://media.tenor.com/net_ivlSaT4AAAAM/bow-bowing.gif" type="gif" alt="bowing gif">
    <p>thankyou for your patience :)</p>
        <script>
       
        // estamos haciendo una request al back, queremos guardar/POSTear datos en el microservicio 'auth', que aun no existe, con path '/login'
        fetch("/api/auth/login", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
                email: "test@test.com",
                password: "1234"
            })
        })
            .then(res => res.json())
            .then(console.log);

        </script>
        <h1>Lista de Usuarios</h1>
  <ul id="user-list"></ul>

  <script>
    async function fetchUsers() {
      try {
        // Llamamos a la API Gateway
        const response = await fetch('http://localhost:3000/api/users', {
          method: 'GET',
          headers: {
            'Content-Type': 'application/json'
          }
        });

        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }

        const users = await response.json();

        const ul = document.getElementById('user-list');
        ul.innerHTML = ''; // limpiar lista

        users.forEach(user => {
          const li = document.createElement('li');
          li.textContent = `ID: ${user.id}, Nombre: ${user.username}`;
          ul.appendChild(li);
        });
      } catch (error) {
        console.error('Error fetching users:', error);
        const ul = document.getElementById('user-list');
        ul.innerHTML = '<li>Error cargando usuarios</li>';
      }
    }

    // Ejecutar al cargar la p√°gina
    fetchUsers();
  </script>

</body>
</html>
